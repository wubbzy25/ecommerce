-- we don't know how to generate root <with-no-name> (class Root) :(

comment on database postgres is 'default administrative connection database';

create sequence users_id_user_seq
    as integer;

alter sequence users_id_user_seq owner to postgres;

create sequence products_id_product_seq
    as integer;

alter sequence products_id_product_seq owner to postgres;

create sequence carts_id_cart_seq
    as integer;

alter sequence carts_id_cart_seq owner to postgres;

create sequence carts_items_id_cart_item_seq
    as integer;

alter sequence carts_items_id_cart_item_seq owner to postgres;

create sequence sizes_id_size_seq
    as integer;

alter sequence sizes_id_size_seq owner to postgres;

create sequence reviews_id_review_seq
    as integer;

alter sequence reviews_id_review_seq owner to postgres;

create sequence users_seq
    increment by 50;

alter sequence users_seq owner to postgres;

create table users
(
    id_user    bigint                   default nextval('users_id_user_seq'::regclass) not null
        primary key,
    name       varchar(255)                                                            not null,
    email      varchar(255)                                                            not null
        unique,
    password   varchar(255)                                                            not null,
    phone      varchar(255),
    created_at timestamp with time zone default now()
);

alter table users
    owner to postgres;

alter sequence users_id_user_seq owned by users.id_user;

create table roles
(
    id_rol serial
        primary key,
    name   varchar(20) not null
        unique
);

alter table roles
    owner to postgres;

create table user_roles
(
    id_user_rol serial
        primary key,
    id_user     integer not null
        unique
        constraint fk_users
            references users
            on delete cascade,
    id_rol      integer not null
        unique
        constraint fk_roles
            references roles
            on delete cascade
);

alter table user_roles
    owner to postgres;

create table products
(
    id_product  bigint                   default nextval('products_id_product_seq'::regclass) not null
        primary key,
    name        varchar(255)                                                                  not null,
    description varchar,
    price       double precision                                                              not null,
    stock       integer                                                                       not null,
    created_at  timestamp with time zone default now()                                        not null,
    color       varchar(255)                                                                  not null,
    image       varchar(255),
    discount    integer                  default 0                                            not null
);

alter table products
    owner to postgres;

alter sequence products_id_product_seq owned by products.id_product;

create table categories
(
    id_category serial
        primary key,
    name        varchar(50) not null
);

alter table categories
    owner to postgres;

create table carts
(
    id_cart bigint default nextval('carts_id_cart_seq'::regclass) not null
        primary key,
    id_user bigint                                                not null
        unique
        constraint fk_users
            references users,
    cart_id bigint generated by default as identity
);

alter table carts
    owner to postgres;

alter sequence carts_id_cart_seq owned by carts.id_cart;

create table carts_items
(
    id_cart_item bigint default nextval('carts_items_id_cart_item_seq'::regclass) not null
        primary key,
    quantity     integer                                                          not null,
    id_product   bigint                                                           not null
        unique
        constraint fk_products
            references products,
    id_cart      bigint                                                           not null
        constraint fk_carts
            references carts,
    size         varchar(255)
);

alter table carts_items
    owner to postgres;

alter sequence carts_items_id_cart_item_seq owned by carts_items.id_cart_item;

create table orders
(
    id_order    serial
        primary key,
    status      varchar(20)                            not null,
    total_price numeric(15, 2)                         not null,
    created_at  timestamp with time zone default now() not null,
    id_user     integer                                not null
        unique
        constraint fk_users
            references users
);

alter table orders
    owner to postgres;

create table orders_items
(
    id_order_item serial
        primary key,
    quantity      integer default 1 not null,
    id_order      integer           not null
        constraint fk_orders
            references orders,
    id_product    integer           not null
        constraint fk_products
            references products
);

alter table orders_items
    owner to postgres;

create table payments
(
    id_payment        serial
        primary key,
    payment_method    varchar(20)                            not null,
    transaction_id    varchar(50)                            not null,
    payment_intent_id varchar(50)                            not null,
    amount            numeric(15, 2),
    currency          varchar(10)              default 'COP'::character varying,
    status            varchar(15),
    paid_at           timestamp with time zone default now() not null,
    id_order          integer                                not null
        unique
        constraint fk_orders
            references orders
);

alter table payments
    owner to postgres;

create table shipments
(
    id_shipment     serial
        primary key,
    address         varchar(40)                            not null,
    status          varchar(10),
    tracking_number varchar(250)                           not null,
    shipped_at      timestamp with time zone default now() not null,
    id_order        integer                                not null
        constraint fk_orders
            references orders
);

alter table shipments
    owner to postgres;

create table products_categories
(
    id_category          integer
        constraint products_categories_categories_id_category_fk
            references categories,
    id_product           integer
        constraint products_categories_products_id_product_fk
            references products,
    id_products_category serial
        constraint id_products_categories
            primary key
);

alter table products_categories
    owner to postgres;

create table sizes
(
    id_size bigint default nextval('sizes_id_size_seq'::regclass) not null
        constraint sizes_pk
            primary key,
    name    varchar(255),
    size    varchar(255)
);

alter table sizes
    owner to postgres;

alter sequence sizes_id_size_seq owned by sizes.id_size;

create table sizes_products
(
    id_size_product serial
        constraint id_size_product
            primary key,
    id_product      bigint
        constraint sizes_products_products_id_product_fk
            references products,
    id_size         bigint
        constraint fkiv1rj2yrwx841vodm8eq7mrtw
            references sizes
);

alter table sizes_products
    owner to postgres;

create table reviews
(
    id_review   bigint                   default nextval('reviews_id_review_seq'::regclass) not null
        constraint reviews_pk
            primary key,
    score       integer                                                                     not null,
    review      varchar(255)                                                                not null,
    posted_date timestamp with time zone default CURRENT_TIMESTAMP,
    id_product  integer
        constraint reviews_products_id_product_fk
            references products,
    id_user     bigint
        constraint reviews_users_id_user_fk
            references users
);

alter table reviews
    owner to postgres;

alter sequence reviews_id_review_seq owned by reviews.id_review;


INSERT INTO categories (id_category, name)  VALUES 
(1,'new arrivals'),
(2,'top selling'),
(3,'casual'),
(4,'formal'),
(5,'party'),
(6,'gym');

INSERT INTO users (id_user, name, email, password, phone, created_at) VALUES (18, 'Carlos Salas', 'carlosasalas321@gmail.com', '$2a$10$YiaSHBTjlPxK6lLhh.iWh.rI80fGPE9I7kPyLod4thxsWeA7ind9W', '3106931114', '2025-01-03 03:29:13.633873 +00:00');

INSERT INTO products (id_product, name, description, price, stock, created_at, color, image, discount) VALUES 
(13, 'Polo with Tipping Details', 'Elevate your wardrobe with our Polo with Tipping Details. This stylish polo combines classic design with modern touches, perfect for any occasion. Crafted from high-quality fabric, it offers exceptional comfort and durability. The tipping details on the collar and sleeves add a sophisticated and contemporary flair to your look. Pair it with your favorite jeans or chinos for a polished yet relaxed ensemble.', 180, 34, '2025-01-23 03:23:19.109487 +00:00', 'BROWN', 'https://i.ibb.co/Sr1PhJy/polo-brown.png', 30),
(1, 'T-SHIRT WITH TAPE DETAILS', 'Upgrade your casual wardrobe with this sleek and stylish black T-shirt. Featuring unique tape details that add a modern twist to a classic look, this T-shirt is perfect for any occasion. The soft, comfortable fabric ensures a great fit, while the tape accents on the sleeves and shoulders provide a touch of contemporary flair. Pair it with jeans or shorts for an effortlessly cool outfit.', 120, 5, '2025-01-12 04:26:24.186735 +00:00', 'BLACK', 'https://i.ibb.co/GvjMSjc/black-image-new-arrivals.png', 20),
(6, 'COURAGE GRAPHIC T-SHIRT', 'Unleash your inner strength with our Courage Graphic T-Shirt. Designed to inspire, this T-shirt features a bold graphic print that makes a powerful statement. Made from soft and breathable fabric, it ensures maximum comfort and durability. Whether you''re hitting the gym or hanging out with friends, this T-shirt is perfect for any casual occasion.', 145, 20, '2025-01-12 16:25:05.624089 +00:00', 'ORANGE', 'https://i.ibb.co/q9SzwVg/i.png', 0),
(8, 'FADED SKINNY JEANS', 'Step up your style game with our Faded Skinny Jeans. These jeans offer a modern and sleek fit, perfect for both casual and dressy occasions. The faded detailing adds a trendy and worn-in look that complements any outfit. Made from a high-quality cotton blend, these jeans ensure comfort and durability throughout the day.', 210, 30, '2025-01-12 16:25:05.624089 +00:00', 'BLACK', 'https://i.ibb.co/qmHnh7J/x.png', 0),
(3, 'CHECKERED SHIRT', 'Upgrade your casual wardrobe with this stylish and versatile Checkered Shirt. Featuring a classic checkered pattern, this shirt is perfect for both casual and semi-formal occasions. The soft, breathable fabric ensures all-day comfort, while the timeless design provides a touch of sophistication. Pair it with jeans, chinos, or shorts for an effortlessly cool outfit.', 180, 15, '2025-01-12 16:03:02.748559 +00:00', 'RED', 'https://i.ibb.co/0DWM44G/a47b3d30-e6e4-49a2-b879-379091b9d56b-1.png', 0),
(14, 'Black Striped T-shirt', 'Upgrade your casual wardrobe with our Black Striped T-Shirt. This classic tee features a timeless black and white stripe pattern that adds a touch of style to your everyday look. Made from soft, high-quality fabric, it ensures all-day comfort and durability. The versatile design makes it easy to pair with jeans, shorts, or even a blazer for a smart-casual ensemble. Whether you''re lounging at home or out and about, this striped T-shirt is a must-have addition to your collection.', 150, 10, '2025-01-23 03:23:19.109487 +00:00', 'WHITE', 'https://i.ibb.co/Ry4c0BY/tshirt-black-and-white.png', 0),
(5, 'VERTICAL STRIPED SHIRT', 'Elevate your wardrobe with our top-selling Vertical Striped Shirt. Perfect for both casual and formal occasions, this shirt combines timeless elegance with modern style. The vertical stripes not only create a sleek, elongated silhouette but also add a touch of sophistication to your outfit. Made with premium fabric, this shirt ensures comfort and durability throughout the day.', 232, 25, '2025-01-12 16:25:05.624089 +00:00', 'GREEN', 'https://i.ibb.co/YtVYGVr/69a9d7b9-3941-42b7-b96a-c586a2163a46-1-1.png', 0),
(12, 'POLO WITH CONTRAST TRIMS', 'Refresh your style with our Polo with Contrast Trims. This garment combines elegance and comfort, perfect for any occasion. Made with high-quality fabric, this polo offers unparalleled softness and freshness, ideal for keeping you comfortable throughout the day. The contrast trims add a modern and sophisticated touch to your look. Perfect to pair with jeans or chinos for a casually refined style.', 242, 15, '2025-01-23 03:23:19.109487 +00:00', 'BLUE', 'https://i.ibb.co/2jg2gRP/polo-blue.png', 0),
(4, 'SLEEVE STRIPED T-SHIRT', 'Upgrade your casual wardrobe with this stylish Sleeve Striped T-Shirt. Featuring unique stripe details on the sleeves, this T-shirt adds a modern twist to a classic look. The soft, comfortable fabric ensures a great fit, making it perfect for any occasion. Pair it with jeans or shorts for an effortlessly cool outfit.', 160, 4, '2025-01-12 16:03:02.748559 +00:00', 'ORANGE', 'https://i.ibb.co/jfkNjQS/02e7605f-8943-4f76-9393-9dad617846d2-1.png', 60),
(2, 'SKINNY FIT JEANS', 'Upgrade your everyday style with these sleek and trendy Skinny Fit Jeans. Designed to provide a tailored, slim silhouette, these jeans are perfect for any occasion. The high-quality fabric ensures a comfortable and flexible fit, while the unique distressed detailing adds a modern twist to a classic look. Pair them with your favorite T-shirt or shirt for an effortlessly cool outfit.', 260, 10, '2025-01-12 15:38:19.231325 +00:00', 'BLUE', 'https://i.ibb.co/ncrCy09/f232200d-8454-4bf4-8d67-1c7d40716949-2-1.png', 100),
(15, 'One Life Graphic T-shirt', 'Elevate your style with our One Life Graphic T-shirt. Featuring a bold, eye-catching graphic design, this tee is perfect for making a statement. Crafted from premium, soft fabric, it offers all-day comfort and durability. The unique design adds a touch of individuality to your wardrobe, making it easy to pair with jeans, shorts, or even layer under a jacket for a trendy look. Whether you''re heading out for an adventure or relaxing at home, the One Life Graphic T-shirt is a must-have addition to your collection. Embrace the motto of living life to the fullest with this standout piece.', 300, 15, '2025-01-23 03:23:19.109487 +00:00', 'GREEN', 'https://i.ibb.co/dgrVRsm/green-shirt.png', 50),
(7, 'LOOSE FIT BERMUDA SHORTS', 'Stay cool and comfortable with our Loose Fit Bermuda Shorts. Perfect for warm weather, these shorts offer a relaxed and stylish fit that ensures maximum comfort throughout the day. Made with high-quality fabric, they are designed to last and provide a versatile addition to your wardrobe. Pair them with a T-shirt or polo for an effortlessly casual look.', 80, 27, '2025-01-12 16:25:05.624089 +00:00', 'BLUE', 'https://i.ibb.co/Wv69d3y/a.png', 60);


INSERT INTO products_categories (id_category, id_product, id_products_category) VALUES 
(1, 1, 1), (1, 2, 2), (1, 3, 3), (1, 4, 4),
(2, 5, 5), (2, 6, 6), (2, 7, 7), (2, 8, 8),
(3, 12, 9), (3, 13, 10), (3, 14, 11), (3, 15, 12);



INSERT INTO reviews (id_review, score, review, posted_date, id_product, id_user) VALUES 
(1, 5, 'The casual dress is of great quality and has an elegant design. Overall, the store offers a wide variety of stylish and comfortable options.', '2025-01-14 20:25:04.205354 +00:00', 1, 18),
(2, 4, 'This formal outfit is very comfortable and fits well. The store provides excellent customer service and a pleasant shopping experience.', '2025-01-14 20:25:04.205354 +00:00', 2, 18),
(3, 5, 'The party dress is perfect for any event, it is very eye-catching. The store has a fantastic selection of party wear and accessories.', '2025-01-14 20:25:04.205354 +00:00', 3, 18),
(4, 4, 'Great for the gym, very functional and durable. The store offers a good range of fitness apparel at reasonable prices.', '2025-01-14 20:25:04.205354 +00:00', 4, 18),
(5, 4, 'The casual shirt is soft and lightweight. The store always delivers quality products and has a great return policy.', '2025-01-14 20:25:04.205354 +00:00', 5, 18),
(6, 5, 'The formal shoes are sleek and very comfortable. The store offers a wide range of sizes and styles.', '2025-01-14 20:25:04.205354 +00:00', 6, 18),
(7, 5, 'The party accessories are fun and trendy. The store has unique items that are perfect for celebrations.', '2025-01-14 20:25:04.205354 +00:00', 7, 18),
(8, 4, 'The gym bag is spacious and well-constructed. The store provides excellent value for the price.', '2025-01-14 20:25:04.205354 +00:00', 8, 18),
(9, 5, 'Stylish and comfortable, this polo''s contrast trims add sophistication. The fabric is breathable and maintains its shape after washes. Perfect for casual or semi-formal wear.', '2025-01-23 04:53:26.175250 +00:00', 12, 18),
(10, 5, 'This polo stands out with its elegant tipping details. The premium material feels great on the skin, and it holds up well in the wash. Ideal for any occasion.', '2025-01-23 04:53:26.175250 +00:00', 13, 18),
(11, 4, 'Dynamic and simple, this black striped t-shirt offers a snug fit with lightweight, stretchy fabric. Great for casual outings or layering.', '2025-01-23 04:53:26.175250 +00:00', 14, 18),
(12, 3, 'Bold and vibrant, the One Life graphic t-shirt delivers a strong message. Made of high-quality cotton, it’s soft, breathable, and a great conversation starter.', '2025-01-23 04:53:26.175250 +00:00', 15, 18);


INSERT INTO roles (id_rol, name) VALUES 
(1, 'ADMIN'),
(2, 'USER');

INSERT INTO sizes (id_size, name) VALUES
(1, 'XX-Small'),
(2, 'X-Small'),
(3, 'Small'),
(4, 'Medium'),
(5, 'Large'),
(6, 'X-Large'),
(7, 'XX-Large'),
(8, '3X-Large'),
(9, '4X-Large');



INSERT INTO sizes_products (id_size_product, id_product, id_size) VALUES 
(3, 1, 6),
(1, 1, 3),
(2, 1, 5),
(4, 1, 8),
(5, 2, 1),
(6, 2, 3),
(7, 2, 4),
(8, 2, 8),
(9, 3, 2),
(10, 3, 3),
(11, 3, 4),
(12, 3, 5),
(13, 4, 5),
(14, 4, 6),
(15, 4, 7),
(16, 4, 9),
(26, 7, 5),
(40, 13, 9),
(21, 6, 2),
(35, 12, 3),
(23, 6, 8),
(48, 15, 9),
(18, 5, 3),
(31, 8, 2),
(39, 13, 8),
(45, 15, 6),
(29, 8, 4),
(19, 5, 4),
(47, 15, 8),
(41, 14, 2),
(27, 7, 4),
(44, 14, 5),
(30, 8, 1),
(37, 13, 4),
(36, 12, 4),
(28, 7, 3),
(42, 14, 1),
(20, 5, 5),
(33, 12, 7),
(24, 6, 7),
(38, 13, 5),
(17, 5, 1),
(43, 14, 3),
(22, 6, 9),
(34, 12, 6),
(46, 15, 7),
(32, 8, 6),
(25, 7, 6);
